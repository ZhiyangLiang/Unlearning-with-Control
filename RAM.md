# RAM

#### GA + Maintain (loss):

##### new

##### opt1.3b-Forget1:

|      | Forget Quality        | Truth Ratio (Forget) log(x + 1) | Truth Ratio        | Normal Rate | Memorization(Forget) | Memorization(Retain) |
| ---- | --------------------- | ------------------------------- | ------------------ | ----------- | -------------------- | -------------------- |
| 0    | 0.2656871402817289    | 0.47405271193280124             | 0.5012262371046335 | 100         | 0.0                  | 0.13415354451272243  |
| -0.1 | 0.054141077480362725  | 0.4483399262847587              | 0.5026443906497711 | 100         | 0.25154675           | 0.14753754           |
| -0.2 | 0.02860307028023343   | 0.44991951745197095             | 0.5014390368929675 | 100         | 0.60338542           | 0.13144482           |
| -0.5 | 0.2656871402817289    | 0.48163277007947664             | 0.5019591695387912 | 100         | 0.74558264           | 0.11290228           |
| -1   | 0.16497269950224194   | 0.4880243904700185              | 0.5000810111439259 | 100         | 0.844933             | 0.10967648           |
| -2   | 0.7659314523482239    | 0.6116941510102535              | 0.5021410088687699 | 95          | 0.93870936           | 0.13886587           |
| -5   | 0.09707484379785862   | 0.8600857225251697              | 0.4981400232905985 | 55          | 0.99083279           | 0.17306299           |
| -10  | 0.0003037979589157969 | 1.2578084957188476              | 0.5013366019351407 | 5           | 1.0                  | 0.14037280698368876  |
| -20  | 0.0009013637775216638 | 0.8044638998704501              | 0.5039855802318456 | 0           | 1.0                  | 0.15249401910490087  |
| -50  | 0.01430154804770646   | 1.2290626833544878              | 0.5047030676013443 | 0           | 1.0                  | 0.14157214527980125  |

##### new

##### opt1.3b-Forget5

|      | Forget Quality          | Truth Ratio (Forget) log(x + 1) | Truth Ratio         | Normal Rate | Memorization(Forget) | Memorization(Retain) |
| ---- | ----------------------- | ------------------------------- | ------------------- | ----------- | -------------------- | -------------------- |
| -0.2 | 0.0002123780052985379,  | 0.47442192331916216             | /                   | /           | /                    | /                    |
| -0.5 | 0.00032821228286246976, | 0.48339813848895435             | /                   | /           | /                    | /                    |
| -1   | 0.004063647403667497,   | 0.506339001688029               | /                   | /           | /                    | /                    |
| -2   | 0.37544716541429346,    | 0.5705230404676174              | 0.49862837162051465 | 90          | 0.8779533460854587   | 0.05064133089133088  |
| -5   | 0.41564933264135784,    | 0.5997664610286438              | 0.5027338763718032  | 0           | 1.0                  | 0.03391369047619048  |
| -10  | 0.0010901071445353942,  | 0.7766398350407538              | /                   | /           | /                    | /                    |

##### new

##### opt1.3b-Forget10

|      | Forget Quality         | Truth Ratio (Forget) log(x + 1) | Truth Ratio        | Normal Rate | Memorization(Forget) | Memorization(Retain) |
| ---- | ---------------------- | ------------------------------- | ------------------ | ----------- | -------------------- | -------------------- |
| -0.2 | 0.0005653711130147049, | 0.46346055403333725             | /                  | /           | /                    | /                    |
| -0.5 | 0.005401253888826536,  | 0.48582873030608065             | /                  | /           | /                    | /                    |
| -1   | 0.008188327465790023,  | 0.5228767561261815              | /                  | /           | /                    | /                    |
| -2   | 0.051784721756374136,  | 0.53697727940306                | 0.5067335141619873 | 90          | 0.9970588235294118   | 0.04589371980676328  |
| -5   | 0.1496667455389953,    | 0.6119360874648334              | 0.5045426599518973 | 0           | 1.0                  | 0.04669811320754717  |
| -10  | 9.65765102754027e-08,  | 0.795023328680022               | /                  | /           | /                    | /                    |

##### new

##### opt2.7b-Forget1

|      | Forget Quality      | Truth Ratio (Forget) log(x + 1) | Truth Ratio        | Normal Rate | Memorization(Forget) | Memorization(Retain) |
| ---- | ------------------- | ------------------------------- | ------------------ | ----------- | -------------------- | -------------------- |
| -0.5 | 0.02860307028023343 | 0.48744990468575433             | /                  | /           | /                    | /                    |
| -1   | 0.09707484379785862 | 0.5222298656084281              | /                  | /           | /                    | /                    |
| -2   | 0.5786001416508443  | 0.6104822560330749              | 0.5133352140598988 | 100         | 0.8639117432899559   | 0.05723110223110224  |
| -5   | 0.01430154804770646 | 1.0564370175896256              | /                  | /           | /                    | /                    |

##### new

##### opt2.7b-Forget5

|      | Forget Quality        | Truth Ratio (Forget) log(x + 1) | Truth Ratio       | Normal Rate | Memorization(Forget) | Memorization(Retain) |
| ---- | --------------------- | ------------------------------- | ----------------- | ----------- | -------------------- | -------------------- |
| -1   | 0.0013701758289044266 | 0.4988019093356062              | /                 | /           | /                    | /                    |
| -2   | 0.019110717602022067  | 0.6208523307999086              | 0.505479564649823 | 90          | 0.8951154705617587   | 0.04815663878163878  |
| -5   | 0.5029845223747939    | 0.6052512503159099              | 0.517707796869109 | 5           | 1.0                  | 0.02727854915354915  |
| -10  | 0.001715726761942161  | 0.7266785123888031              | /                 | /           | /                    | /                    |

##### new

##### opt2.7b-Forget10

|      | Forget Quality         | Truth Ratio (Forget) log(x + 1) | Truth Ratio        | Normal Rate | Memorization(Forget) | Memorization(Retain) |
| ---- | ---------------------- | ------------------------------- | ------------------ | ----------- | -------------------- | -------------------- |
| -2   | 0.0006002877075413837, | 0.49826313855747856             | 0.5198072721684988 | 100         | 1.0                  | 0.012008807588075881 |
| -5   | 0.104676835250499,     | 0.6082012841384313              | 0.5250208788155113 | 0           | 1.0                  | 0.018319194061505832 |
| -10  | 0.009063398220387164,  | 0.6478648362830134              | /                  | /           | /                    | /                    |

#### GA + Maintain (KL):

##### new

##### opt1.3b-Forget1

|      | Forget Quality        | Truth Ratio (Forget) log(x + 1) | Truth Ratio         | Normal Rate | Memorization(Forget) | Memorization(Retain) |
| ---- | --------------------- | ------------------------------- | ------------------- | ----------- | -------------------- | -------------------- |
| 0    | 0.2656871402817289    | 0.4885062354708063              | 0.4973709781603512  | 100         | 0.0                  | 0.14444742           |
| -0.1 | 0.09707484379785862   | 0.46494258333462013             | 0.4985739218268384  | 100         | 0.26344922           | 0.15493506           |
| -0.2 | 0.2656871402817289    | 0.4688130561649086              | 0.4978173620515449  | 100         | 0.64599348           | 0.16902876           |
| -0.5 | 0.2656871402817289    | 0.4797938597053267              | 0.497506807019728   | 100         | 0.79820703           | 0.18963315           |
| -1   | 0.16497269950224194   | 0.5223227985932011              | 0.4950676188753425  | 95          | 0.85588387           | 0.1906872            |
| -2   | 0.7659314523482239    | 0.56846581698442                | 0.4951186762754217  | 100         | 0.93195293           | 0.16875668           |
| -5   | 0.16497269950224194   | 0.7444440816359535              | 0.48884797672970604 | 20          | 0.99478962           | 0.25199798           |
| -10  | 0.0009013637775216638 | 1.0146658116428677              | 0.49686250453779013 | 0           | 1.0                  | 0.17914435           |
| -20  | 7.17981843959014e-06  | 1.6892665376074167              | 0.49097555360432293 | 0           | 1.0                  | 0.20222248           |
| -50  | 0.003018184077228396  | 1.1897132690040662              | 0.4928759724122157  | 0           | 1.0                  | 0.21008624           |



#### Early Stop (GA + Maintain)

|      | Forget Quality         | Truth Ratio (Forget) log(x + 1) | Truth Ratio        | Normal Rate | Memorization(Forget) | Memorization(Retain) |
| ---- | ---------------------- | ------------------------------- | ------------------ | ----------- | -------------------- | -------------------- |
| 40   | 0.09707484379785862,   | 1.0531460929858034              | 0.498831325914201  | 60          | 0.9713383838383839   | 0.6702801890204588   |
| 80   | 2.156357811320459e-05, | 45.36161282473347               | 0.5127750717187545 | 5           | 1.0                  | 0.6620267961771936   |
| 160  | 6.5768913245274e-05,   | 1.5682240322044645              | 0.4824383802854004 | 0           | 1.0                  | 0.29189457349237385  |
| 240  | 0.0005039436209702519, | 5.634321165194685               | 0.503316844315387  | 0           | 1.0                  | 0.23153886418624853  |
| 320  | 6.5768913245274e-05,   | 37.9667619628148                | 0.5087017230839418 | 0           | 1.0                  | 0.1815348317405411   |



### Main Experiment

##### new

#### opt1.3b-Forget1:

|                | Forget Quality        | Truth Ratio (Forget) log(x + 1) | Truth Ratio         | Normal Rate | Memorization(Forget) | Memorization(Retain) |
| -------------- | --------------------- | ------------------------------- | ------------------- | ----------- | -------------------- | -------------------- |
| Grad ascent    | 6.608193292756245e-06 | 1.7401938648163238              | 0.2991233738250849  | 0.0         | 1.0                  | 1.0                  |
| Grad diff      | 6.608193292756245e-06 | 5.795137125044307               | 0.5096392319945731  | 0.0         | 1.0                  | 0.18896857           |
| KL             | 0.0012708143485281624 | 7.239883032505917               | 0.49749616567040067 | 0.0         | 1.0                  | 0.28461722           |
| DPO            | 0.09707484379785862   | 0.4861505510417829              | 0.4975115276716762  | 1.0         | 0.38311198           | 0.15121509           |
| Attention norm | 0.9188052214121167    | 0.5977584788242771              | 0.5005685610854606  | 0.55        | 0.99618845           | 0.1753412            |

##### new

#### opt1.3b-Forget5:

|             | Forget Quality          | Truth Ratio (Forget) log(x + 1) | Truth Ratio        | Normal Rate | Memorization(Forget) | Memorization(Retain) |
| ----------- | ----------------------- | ------------------------------- | ------------------ | ----------- | -------------------- | -------------------- |
| Grad ascent | 2.8001701465082902e-09, | 5.328618815937302               | 0.3097305511467787 | 0           | 1.0                  | 1.0                  |
| Grad diff   | 1.2650095025052522e-07, | 9.216682257030893               | 0.5136199555296264 | 0           | 1.0                  | 0.07502907715407715  |
| KL          | 1.2650095025052522e-07, | 9.343128093812641               | 0.5119459650512259 | 0           | 1.0                  | 0.1511169735468516   |
| DPO         | 8.97100889752212e-05,   | 0.5077459476693821              | 0.4997235016052767 | 100         | 0.3156134856174001   | 0.09244039708745591  |

##### new

#### opt1.3b-Forget10:

|             | Forget Quality          | Truth Ratio (Forget) log(x + 1) | Truth Ratio        | Normal Rate | Memorization(Forget) | Memorization(Retain) |
| ----------- | ----------------------- | ------------------------------- | ------------------ | ----------- | -------------------- | -------------------- |
| Grad ascent | 4.038199473467215e-09,  | 8.777255210768061               | 0.3635433423325127 | 0           | 1.0                  | 1.0                  |
| Grad diff   | 1.2053702218780493e-10, | 17.990307650619624              | 0.5175673596125493 | 0           | 1.0                  | 0.03816004979035639  |
| KL          | 5.997480659702142e-11,  | 7.260104813035204               | 0.5095369809955987 | 0           | 1.0                  | 0.1789973677934706   |
| DPO         | 0.0001076362675415452,  | 0.5088192902197064              | 0.5007024914882593 | 100         | 0.4584428052894821   | 0.021698113207547172 |

##### new

#### opt2.7b-Forget1:

|             | Forget Quality         | Truth Ratio (Forget) log(x + 1) | Truth Ratio         | Normal Rate | Memorization(Forget) | Memorization(Retain) |
| ----------- | ---------------------- | ------------------------------- | ------------------- | ----------- | -------------------- | -------------------- |
| Grad ascent | 2.156357811320459e-05, | 10.534430989032222              | 0.36089260052924305 | 0           | 1.0                  | 1.0                  |
| Grad diff   | 0.0005039436209702519, | 4.953902747360885               | 0.5190663668790896  | 0           | 1.0                  | 0.07679458138760466  |
| KL          | 0.0005039436209702519, | 2.551854868626252               | 0.4970161813418871  | 0           | 1.0                  | 0.13413475054109428  |
| DPO         | 0.006760732303569208,  | 0.488046304177835               | 0.5202190767930981  | 100         | 0.3199578034492441   | 0.10039716332055042  |

##### new

#### opt2.7b-Forget5:

|             | Forget Quality          | Truth Ratio (Forget) log(x + 1) | Truth Ratio        | Normal Rate | Memorization(Forget) | Memorization(Retain) |
| ----------- | ----------------------- | ------------------------------- | ------------------ | ----------- | -------------------- | -------------------- |
| Grad ascent | 1.8632317139826657e-09, | 7.300081577293934               | 0.3330703249369434 | 0           | 1.0                  | 1.0                  |
| Grad diff   | 2.8001701465082902e-09, | 5.470042181363281               | 0.5236240747279708 | 0           | 1.0                  | 0.06336336336336337  |
| KL          | 4.187654526634338e-09,  | 6.068362964005035               | 0.5244877244093739 | 0           | 1.0                  | 0.08138457825957826  |
| DPO         | 0.0005366185447427601,  | 0.47758688351620826             | 0.5211182157391696 | 100         | 0.14851103263417167  | 0.022756410256410255 |

##### new

#### opt2.7b-Forget10:

|             | Forget Quality         | Truth Ratio (Forget) log(x + 1) | Truth Ratio        | Normal Rate | Memorization(Forget) | Memorization(Retain) |
| ----------- | ---------------------- | ------------------------------- | ------------------ | ----------- | -------------------- | -------------------- |
| Grad ascent | 1.9373085164949765e-12 | 7.744350299031034               | 0.3212131402744365 | 0           | 1.0                  | 1.0                  |
| Grad diff   | 1.4988428916097404e-12 | 9.06263837716665                | 0.5330161082903527 | 0           | 1.0                  | 0.0125               |
| KL          | 1.1577936224716675e-12 | 25.782738126336984              | 0.5221769650245482 | 0           | 1.0                  | 0.03150665926748057  |
| DPO         | 0.0001076362675415452  | 0.5157196333082469              | 0.5185095679446634 | 100         | 0.261893121677648    | 0.04044811320754717  |

