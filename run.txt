original_test_normal:
bad_scores_train < 2: 427
bad_scores_train < 1: 395
bad_scores_train < 1: 349
bad_scores_train < 0: 293
bad_scores_train < 0: 188
bad_scores_train < 0: 102
bad_scores_train < -1: 52
bad_scores_train < -1: 22
bad_scores_train < -2: 5

bad_scores_test < 2: 444
bad_scores_test < 1: 409
bad_scores_test < 1: 363
bad_scores_test < 0: 351
bad_scores_test < 0: 325
bad_scores_test < 0: 295
bad_scores_test < 0: 258
bad_scores_test < 0: 223
bad_scores_test < 0: 204
bad_scores_test < 0: 186
bad_scores_test < 0: 145
bad_scores_test < 0: 115
bad_scores_test < 0: 86
bad_scores_test < 0: 65
bad_scores_test < -1: 53
bad_scores_test < -1: 23
bad_scores_test < -2: 7
--------------------------------------------------
normal_scores < 2: 162
normal_scores < 1: 159
normal_scores < 1: 152
normal_scores < 0: 148
normal_scores < 0: 134
normal_scores < 0: 130
normal_scores < 0: 119
normal_scores < 0: 103
normal_scores < 0: 98
normal_scores < 0: 89
normal_scores < 0: 66
normal_scores < 0: 50
normal_scores < 0: 40
normal_scores < 0: 29
normal_scores < -1: 23
normal_scores < -1: 8
normal_scores < -2: 2

unlearned_test_normal:
只有bad_loss项的结果整体好于三项的结果；只有random_loss项的结果、只有normal_loss项的结果，以及bad_loss项+random_loss项的都结果不如整体不如三项的结果

但只有bad_loss项会导致模型输出只有空行 (无论是对bad_question，还是对normal_question)

bad_scores_train < 2: 477
bad_scores_train < 1: 457
bad_scores_train < 1: 406
bad_scores_train < 0: 329
bad_scores_train < 0: 238
bad_scores_train < 0: 132
bad_scores_train < -1: 51
bad_scores_train < -1: 24
bad_scores_train < -2: 9

bad_scores_test < 2: 478
bad_scores_test < 1: 459
bad_scores_test < 1: 413
bad_scores_test < 0: 406
bad_scores_test < 0: 377
bad_scores_test < 0: 343
bad_scores_test < 0: 307
bad_scores_test < 0: 269
bad_scores_test < 0: 256
bad_scores_test < 0: 235
bad_scores_test < 0: 186
bad_scores_test < 0: 148
bad_scores_test < 0: 113
bad_scores_test < 0: 79
bad_scores_test < -1: 68
bad_scores_test < -1: 30
bad_scores_test < -2: 9
--------------------------------------------------
normal_scores < 2: 161
normal_scores < 1: 161
normal_scores < 1: 152
normal_scores < 0: 151
normal_scores < 0: 150
normal_scores < 0: 145
normal_scores < 0: 134
normal_scores < 0: 126
normal_scores < 0: 122
normal_scores < 0: 113
normal_scores < 0: 103
normal_scores < 0: 88
normal_scores < 0: 70
normal_scores < 0: 64
normal_scores < -1: 53
normal_scores < -1: 28
normal_scores < -2: 12

opt1.3b_unlearned_0.95_0.05_100idx_test_normal:
100idx->150idx后，效果出现了整体下降 ***
0.95->0.90后，bad_test效果上升，超越baseline；normal效果不如0.95，但也比baseline好
bad_scores_test < 2: 470
bad_scores_test < 1: 447
bad_scores_test < 1: 407
bad_scores_test < 0: 394
bad_scores_test < 0: 371
bad_scores_test < 0: 348
bad_scores_test < 0: 310
bad_scores_test < 0: 278
bad_scores_test < 0: 256
bad_scores_test < 0: 240
bad_scores_test < 0: 201
bad_scores_test < 0: 163
bad_scores_test < 0: 141
bad_scores_test < 0: 109
bad_scores_test < -1: 100
bad_scores_test < -1: 57
bad_scores_test < -2: 26
--------------------------------------------------
normal_scores < 2: 164
normal_scores < 1: 162
normal_scores < 1: 160
normal_scores < 0: 159
normal_scores < 0: 157
normal_scores < 0: 152
normal_scores < 0: 144
normal_scores < 0: 140
normal_scores < 0: 132
normal_scores < 0: 123
normal_scores < 0: 109
normal_scores < 0: 99
normal_scores < 0: 77
normal_scores < 0: 70
normal_scores < -1: 61
normal_scores < -1: 33
normal_scores < -2: 17

opt1.3b_unlearned_0.90_0.10_100idx_test_normal:
bad_scores_train < 2: 474
bad_scores_train < 1: 462
bad_scores_train < 1: 437
bad_scores_train < 0: 394
bad_scores_train < 0: 325
bad_scores_train < 0: 243
bad_scores_train < -1: 165
bad_scores_train < -1: 97
bad_scores_train < -2: 46

bad_scores_test < 2: 478
bad_scores_test < 1: 464
bad_scores_test < 1: 435
bad_scores_test < 0: 429
bad_scores_test < 0: 410
bad_scores_test < 0: 382
bad_scores_test < 0: 363
bad_scores_test < 0: 339
bad_scores_test < 0: 333
bad_scores_test < 0: 317
bad_scores_test < 0: 278
bad_scores_test < 0: 247
bad_scores_test < 0: 205
bad_scores_test < 0: 184
bad_scores_test < -1: 170
bad_scores_test < -1: 99
bad_scores_test < -2: 49
--------------------------------------------------
normal_scores < 2: 164
normal_scores < 1: 160
normal_scores < 1: 158
normal_scores < 0: 156
normal_scores < 0: 153
normal_scores < 0: 149
normal_scores < 0: 140
normal_scores < 0: 131
normal_scores < 0: 123
normal_scores < 0: 118
normal_scores < 0: 103
normal_scores < 0: 95
normal_scores < 0: 76
normal_scores < 0: 68
normal_scores < -1: 63
normal_scores < -1: 40
normal_scores < -2: 15

opt1.3b_unlearned_0.85_0.15_100idx_test_normal:
0.85->0.80后，效果出现了整体下降 ***
0.85-train:
bad_scores_train < 2: 469
bad_scores_train < 1: 452
bad_scores_train < 1: 420
bad_scores_train < 0: 382
bad_scores_train < 0: 338
bad_scores_train < 0: 279
bad_scores_train < -1: 217
bad_scores_train < -1: 137
bad_scores_train < -2: 75

0.80-train:
bad_scores_train < 2: 449
bad_scores_train < 1: 429
bad_scores_train < 1: 384
bad_scores_train < 0: 334
bad_scores_train < 0: 270
bad_scores_train < 0: 211
bad_scores_train < -1: 147
bad_scores_train < -1: 85
bad_scores_train < -2: 39

bad_scores_test < 2: 478
bad_scores_test < 1: 468
bad_scores_test < 1: 437
bad_scores_test < 0: 435
bad_scores_test < 0: 421
bad_scores_test < 0: 409
bad_scores_test < 0: 384
bad_scores_test < 0: 369
bad_scores_test < 0: 359
bad_scores_test < 0: 347
bad_scores_test < 0: 320
bad_scores_test < 0: 289
bad_scores_test < 0: 266
bad_scores_test < 0: 244
bad_scores_test < -1: 229
bad_scores_test < -1: 122
bad_scores_test < -2: 73
--------------------------------------------------
normal_scores < 2: 161
normal_scores < 1: 159
normal_scores < 1: 155
normal_scores < 0: 154
normal_scores < 0: 149
normal_scores < 0: 146
normal_scores < 0: 135
normal_scores < 0: 126
normal_scores < 0: 119
normal_scores < 0: 116
normal_scores < 0: 99
normal_scores < 0: 88
normal_scores < 0: 76
normal_scores < 0: 68
normal_scores < -1: 63
normal_scores < -1: 33
normal_scores < -2: 17

opt1.3b_unlearned_0.85_0.15_150idx_test_normal:
bad_scores_train < 2: 482
bad_scores_train < 1: 464
bad_scores_train < 1: 439
bad_scores_train < 0: 406
bad_scores_train < 0: 352
bad_scores_train < 0: 290
bad_scores_train < -1: 214
bad_scores_train < -1: 148
bad_scores_train < -2: 78

bad_scores_test < 2: 493
bad_scores_test < 1: 485
bad_scores_test < 1: 459
bad_scores_test < 0: 456
bad_scores_test < 0: 448
bad_scores_test < 0: 431
bad_scores_test < 0: 412
bad_scores_test < 0: 389
bad_scores_test < 0: 383
bad_scores_test < 0: 369
bad_scores_test < 0: 344
bad_scores_test < 0: 307
bad_scores_test < 0: 277
bad_scores_test < 0: 243
bad_scores_test < -1: 232
bad_scores_test < -1: 139
bad_scores_test < -2: 70
--------------------------------------------------
normal_scores < 2: 165
normal_scores < 1: 162
normal_scores < 1: 160
normal_scores < 0: 159
normal_scores < 0: 158
normal_scores < 0: 154
normal_scores < 0: 144
normal_scores < 0: 138
normal_scores < 0: 130
normal_scores < 0: 127
normal_scores < 0: 114
normal_scores < 0: 104
normal_scores < 0: 85
normal_scores < 0: 69
normal_scores < -1: 62
normal_scores < -1: 43
normal_scores < -2: 18

todo:
1、lora with appropriate learning rate：与original的结果完全一致，但训练的loss确实出现了较大幅度的变化
2、loss三项的消融实验：只有bad_loss项的结果整体好于三项的结果；只有random_loss项的结果、只有normal_loss项的结果，以及bad_loss项+random_loss项的都结果不如整体不如三项的结果；只有bad_loss项会导致模型输出只有空行 (无论是对bad_question，还是对normal_question)
3、masked：
4、two settings (with another dataset)：

OPTForCausalLM(
  (model): OPTModel(
    (decoder): OPTDecoder(
      (embed_tokens): Embedding(50272, 2048, padding_idx=1)
      (embed_positions): OPTLearnedPositionalEmbedding(2050, 2048)
      (final_layer_norm): LayerNorm((2048,), eps=1e-05, elementwise_affine=True)
      (layers): ModuleList(
        (0): OPTDecoderLayer(
          (self_attn): OPTAttention(
            (k_proj): Linear(in_features=2048, out_features=2048, bias=True)
            (v_proj): Linear(in_features=2048, out_features=2048, bias=True)
            (q_proj): Linear(in_features=2048, out_features=2048, bias=True)
            (out_proj): Linear(in_features=2048, out_features=2048, bias=True)
          )
          (activation_fn): ReLU()
          (self_attn_layer_norm): LayerNorm((2048,), eps=1e-05, elementwise_affine=True)
          (fc1): Linear(in_features=2048, out_features=8192, bias=True)
          (fc2): Linear(in_features=8192, out_features=2048, bias=True)
          (final_layer_norm): LayerNorm((2048,), eps=1e-05, elementwise_affine=True)
        )
        (1): OPTDecoderLayer(
          (self_attn): OPTAttention(
            (k_proj): Linear(in_features=2048, out_features=2048, bias=True)
            (v_proj): Linear(in_features=2048, out_features=2048, bias=True)
            (q_proj): Linear(in_features=2048, out_features=2048, bias=True)
            (out_proj): Linear(in_features=2048, out_features=2048, bias=True)
          )
          (activation_fn): ReLU()
          (self_attn_layer_norm): LayerNorm((2048,), eps=1e-05, elementwise_affine=True)
          (fc1): Linear(in_features=2048, out_features=8192, bias=True)
          (fc2): Linear(in_features=8192, out_features=2048, bias=True)
          (final_layer_norm): LayerNorm((2048,), eps=1e-05, elementwise_affine=True)
        )
...


python new_score.py --model=densenet_dice --dataset=cifar10
python new_score.py --model=densenet_dice --dataset=cifar100
python new_score.py --model=resnet50 --dataset=cifar10
python new_score.py --threshold=0.1 --model=resnet50 --dataset=cifar10
python new_score.py --threshold=0.01 --model=resnet50 --dataset=cifar10
python new_score.py --threshold=0.001 --model=resnet50 --dataset=cifar10
python new_score.py --threshold=0.0001 --model=resnet50 --dataset=cifar10
python new_score.py --threshold=0.00001 --model=resnet50 --dataset=cifar10

